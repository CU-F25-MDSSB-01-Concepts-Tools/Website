<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jan Lorenz">

<title>W#03 Data Import, Data Wrangling – Data Science Concepts / Data Science Tools</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-d90c30c96bad360bae691b5c26d18f86.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed slimcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Data Science Concepts / Data Science Tools</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">W#03 Data Import, Data Wrangling</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Schedule</strong></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./late.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Onboarding Late-arriving</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./homework.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework Projects</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./final.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Final Project</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./help.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Help Project Work</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./literature.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literature</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-import-first-look" id="toc-data-import-first-look" class="nav-link active" data-scroll-target="#data-import-first-look"><span class="header-section-number">1</span> Data Import, First Look</a>
  <ul class="collapse">
  <li><a href="#readr-and-readxl" id="toc-readr-and-readxl" class="nav-link" data-scroll-target="#readr-and-readxl"><span class="header-section-number">1.1</span> <code>readr</code> and <code>readxl</code></a></li>
  <li><a href="#importing-data-from-other-sources" id="toc-importing-data-from-other-sources" class="nav-link" data-scroll-target="#importing-data-from-other-sources"><span class="header-section-number">1.2</span> Importing data from other sources</a></li>
  <li><a href="#comma-separated-values-csv" id="toc-comma-separated-values-csv" class="nav-link" data-scroll-target="#comma-separated-values-csv"><span class="header-section-number">1.3</span> Comma-separated values (CSV)</a></li>
  <li><a href="#data-import-workflow" id="toc-data-import-workflow" class="nav-link" data-scroll-target="#data-import-workflow"><span class="header-section-number">1.4</span> Data import workflow</a></li>
  <li><a href="#download-2.-read" id="toc-download-2.-read" class="nav-link" data-scroll-target="#download-2.-read"><span class="header-section-number">1.5</span> 1. Download, 2. Read</a></li>
  <li><a href="#explore-using-spec" id="toc-explore-using-spec" class="nav-link" data-scroll-target="#explore-using-spec"><span class="header-section-number">1.6</span> 3. Explore using <code>spec()</code></a></li>
  <li><a href="#finalize-data-import-option-1" id="toc-finalize-data-import-option-1" class="nav-link" data-scroll-target="#finalize-data-import-option-1"><span class="header-section-number">1.7</span> Finalize data import, option 1</a></li>
  <li><a href="#finalize-data-import-option-2" id="toc-finalize-data-import-option-2" class="nav-link" data-scroll-target="#finalize-data-import-option-2"><span class="header-section-number">1.8</span> Finalize data import, option 2</a></li>
  <li><a href="#columns-types" id="toc-columns-types" class="nav-link" data-scroll-target="#columns-types"><span class="header-section-number">1.9</span> Columns types</a></li>
  <li><a href="#hotels-data" id="toc-hotels-data" class="nav-link" data-scroll-target="#hotels-data"><span class="header-section-number">1.10</span> Hotels data</a></li>
  <li><a href="#first-look-on-data" id="toc-first-look-on-data" class="nav-link" data-scroll-target="#first-look-on-data"><span class="header-section-number">1.11</span> First look on data</a></li>
  <li><a href="#look-on-variable-names" id="toc-look-on-variable-names" class="nav-link" data-scroll-target="#look-on-variable-names"><span class="header-section-number">1.12</span> Look on variable names</a></li>
  <li><a href="#second-look-with-glimpse" id="toc-second-look-with-glimpse" class="nav-link" data-scroll-target="#second-look-with-glimpse"><span class="header-section-number">1.13</span> Second look with <code>glimpse</code></a></li>
  </ul></li>
  <li><a href="#data-wrangling" id="toc-data-wrangling" class="nav-link" data-scroll-target="#data-wrangling"><span class="header-section-number">2</span> Data Wrangling</a>
  <ul class="collapse">
  <li><a href="#grammar-of-data-wrangling" id="toc-grammar-of-data-wrangling" class="nav-link" data-scroll-target="#grammar-of-data-wrangling"><span class="header-section-number">2.1</span> Grammar of Data Wrangling</a></li>
  <li><a href="#what-is-the-pipe" id="toc-what-is-the-pipe" class="nav-link" data-scroll-target="#what-is-the-pipe"><span class="header-section-number">2.2</span> What is the pipe <code>|&gt;</code>?</a></li>
  <li><a href="#dplyr-uses-verbs-to-manipulate" id="toc-dplyr-uses-verbs-to-manipulate" class="nav-link" data-scroll-target="#dplyr-uses-verbs-to-manipulate"><span class="header-section-number">2.3</span> <code>dplyr</code> uses verbs to manipulate</a></li>
  </ul></li>
  <li><a href="#data-subsetting" id="toc-data-subsetting" class="nav-link" data-scroll-target="#data-subsetting"><span class="header-section-number">3</span> Data Subsetting</a>
  <ul class="collapse">
  <li><a href="#select-a-single-column" id="toc-select-a-single-column" class="nav-link" data-scroll-target="#select-a-single-column"><span class="header-section-number">3.1</span> <code>select</code> a single column</a></li>
  <li><a href="#select-more-columns" id="toc-select-more-columns" class="nav-link" data-scroll-target="#select-more-columns"><span class="header-section-number">3.2</span> Select more columns</a></li>
  <li><a href="#select-helper-starts_with" id="toc-select-helper-starts_with" class="nav-link" data-scroll-target="#select-helper-starts_with"><span class="header-section-number">3.3</span> Select helper <code>starts_with</code></a></li>
  <li><a href="#bring-columns-to-the-front" id="toc-bring-columns-to-the-front" class="nav-link" data-scroll-target="#bring-columns-to-the-front"><span class="header-section-number">3.4</span> Bring columns to the front</a></li>
  <li><a href="#more-select-helpers" id="toc-more-select-helpers" class="nav-link" data-scroll-target="#more-select-helpers"><span class="header-section-number">3.5</span> More select helpers</a></li>
  <li><a href="#slice-for-certain-rows" id="toc-slice-for-certain-rows" class="nav-link" data-scroll-target="#slice-for-certain-rows"><span class="header-section-number">3.6</span> <code>slice</code> for certain rows</a></li>
  <li><a href="#filter-for-rows-with-certain-criteria" id="toc-filter-for-rows-with-certain-criteria" class="nav-link" data-scroll-target="#filter-for-rows-with-certain-criteria"><span class="header-section-number">3.7</span> <code>filter</code> for rows with certain criteria</a></li>
  <li><a href="#filter-for-multiple-criteria" id="toc-filter-for-multiple-criteria" class="nav-link" data-scroll-target="#filter-for-multiple-criteria"><span class="header-section-number">3.8</span> <code>filter</code> for multiple criteria</a></li>
  <li><a href="#filter-for-more-complex-criteria" id="toc-filter-for-more-complex-criteria" class="nav-link" data-scroll-target="#filter-for-more-complex-criteria"><span class="header-section-number">3.9</span> <code>filter</code> for more complex criteria</a></li>
  <li><a href="#logical-operators" id="toc-logical-operators" class="nav-link" data-scroll-target="#logical-operators"><span class="header-section-number">3.10</span> Logical operators</a></li>
  </ul></li>
  <li><a href="#numerical-and-logical-indexing" id="toc-numerical-and-logical-indexing" class="nav-link" data-scroll-target="#numerical-and-logical-indexing"><span class="header-section-number">4</span> Numerical and Logical Indexing</a>
  <ul class="collapse">
  <li><a href="#the-concept-of-indexing" id="toc-the-concept-of-indexing" class="nav-link" data-scroll-target="#the-concept-of-indexing"><span class="header-section-number">4.1</span> The Concept of Indexing</a></li>
  <li><a href="#python-is-0-indexed-r-is-1-indexed" id="toc-python-is-0-indexed-r-is-1-indexed" class="nav-link" data-scroll-target="#python-is-0-indexed-r-is-1-indexed"><span class="header-section-number">4.2</span> python is 0-indexed, R is 1-indexed!</a></li>
  <li><a href="#logical-indexing" id="toc-logical-indexing" class="nav-link" data-scroll-target="#logical-indexing"><span class="header-section-number">4.3</span> Logical Indexing</a></li>
  <li><a href="#logical-vectors-from-conditional-statements" id="toc-logical-vectors-from-conditional-statements" class="nav-link" data-scroll-target="#logical-vectors-from-conditional-statements"><span class="header-section-number">4.4</span> Logical vectors from conditional statements</a></li>
  </ul></li>
  <li><a href="#counting-and-sorting" id="toc-counting-and-sorting" class="nav-link" data-scroll-target="#counting-and-sorting"><span class="header-section-number">5</span> Counting and Sorting</a>
  <ul class="collapse">
  <li><a href="#unique-combinations-arranging" id="toc-unique-combinations-arranging" class="nav-link" data-scroll-target="#unique-combinations-arranging"><span class="header-section-number">5.1</span> Unique combinations, arranging</a></li>
  <li><a href="#counting" id="toc-counting" class="nav-link" data-scroll-target="#counting"><span class="header-section-number">5.2</span> Counting</a></li>
  <li><a href="#counting-arrange-descending" id="toc-counting-arrange-descending" class="nav-link" data-scroll-target="#counting-arrange-descending"><span class="header-section-number">5.3</span> Counting, arrange descending</a></li>
  </ul></li>
  <li><a href="#data-transformation" id="toc-data-transformation" class="nav-link" data-scroll-target="#data-transformation"><span class="header-section-number">6</span> Data Transformation</a>
  <ul class="collapse">
  <li><a href="#create-a-new-variable-with-mutate" id="toc-create-a-new-variable-with-mutate" class="nav-link" data-scroll-target="#create-a-new-variable-with-mutate"><span class="header-section-number">6.1</span> Create a new variable with <code>mutate</code></a></li>
  <li><a href="#more-mutating" id="toc-more-mutating" class="nav-link" data-scroll-target="#more-mutating"><span class="header-section-number">6.2</span> More mutating</a></li>
  <li><a href="#summarizing" id="toc-summarizing" class="nav-link" data-scroll-target="#summarizing"><span class="header-section-number">6.3</span> Summarizing</a></li>
  <li><a href="#grouped-operations" id="toc-grouped-operations" class="nav-link" data-scroll-target="#grouped-operations"><span class="header-section-number">6.4</span> Grouped operations</a></li>
  <li><a href="#grouping-summarizing-visualizing" id="toc-grouping-summarizing-visualizing" class="nav-link" data-scroll-target="#grouping-summarizing-visualizing"><span class="header-section-number">6.5</span> Grouping, summarizing, visualizing</a></li>
  <li><a href="#grouping-alternative" id="toc-grouping-alternative" class="nav-link" data-scroll-target="#grouping-alternative"><span class="header-section-number">6.6</span> Grouping alternative</a></li>
  </ul></li>
  <li><a href="#where-to-find-help" id="toc-where-to-find-help" class="nav-link" data-scroll-target="#where-to-find-help"><span class="header-section-number">7</span> Where to find help</a>
  <ul class="collapse">
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources"><span class="header-section-number">7.1</span> Resources</a></li>
  </ul></li>
  <li><a href="#more-under-the-hood-names-vectors-indexing" id="toc-more-under-the-hood-names-vectors-indexing" class="nav-link" data-scroll-target="#more-under-the-hood-names-vectors-indexing"><span class="header-section-number">8</span> More under the hood: Names vectors, Indexing</a>
  <ul class="collapse">
  <li><a href="#named-vectors" id="toc-named-vectors" class="nav-link" data-scroll-target="#named-vectors"><span class="header-section-number">8.1</span> Named vectors</a></li>
  <li><a href="#reminder-indexing-and-vectorized-thinking" id="toc-reminder-indexing-and-vectorized-thinking" class="nav-link" data-scroll-target="#reminder-indexing-and-vectorized-thinking"><span class="header-section-number">8.2</span> Reminder: Indexing and vectorized thinking</a></li>
  <li><a href="#r-objects-can-have-attributes" id="toc-r-objects-can-have-attributes" class="nav-link" data-scroll-target="#r-objects-can-have-attributes"><span class="header-section-number">8.3</span> R objects can have attributes</a></li>
  <li><a href="#attributes-in-data-structures" id="toc-attributes-in-data-structures" class="nav-link" data-scroll-target="#attributes-in-data-structures"><span class="header-section-number">8.4</span> Attributes in data structures</a></li>
  <li><a href="#three-important-attributes" id="toc-three-important-attributes" class="nav-link" data-scroll-target="#three-important-attributes"><span class="header-section-number">8.5</span> Three important attributes</a></li>
  </ul></li>
  <li><a href="#augmented-vectors-factors-and-dates" id="toc-augmented-vectors-factors-and-dates" class="nav-link" data-scroll-target="#augmented-vectors-factors-and-dates"><span class="header-section-number">9</span> Augmented vectors: Factors and Dates</a>
  <ul class="collapse">
  <li><a href="#factors" id="toc-factors" class="nav-link" data-scroll-target="#factors"><span class="header-section-number">9.1</span> Factors</a></li>
  <li><a href="#factors-for-data-visualization" id="toc-factors-for-data-visualization" class="nav-link" data-scroll-target="#factors-for-data-visualization"><span class="header-section-number">9.2</span> Factors for data visualization</a></li>
  <li><a href="#dates" id="toc-dates" class="nav-link" data-scroll-target="#dates"><span class="header-section-number">9.3</span> Dates</a></li>
  <li><a href="#how-many-days-are-you-old" id="toc-how-many-days-are-you-old" class="nav-link" data-scroll-target="#how-many-days-are-you-old"><span class="header-section-number">9.4</span> How many days are you old?</a></li>
  <li><a href="#date-times" id="toc-date-times" class="nav-link" data-scroll-target="#date-times"><span class="header-section-number">9.5</span> Date-times</a></li>
  <li><a href="#how-many-seconds-are-you-old" id="toc-how-many-seconds-are-you-old" class="nav-link" data-scroll-target="#how-many-seconds-are-you-old"><span class="header-section-number">9.6</span> How many seconds are you old?</a></li>
  <li><a href="#summary-on-factors-and-dates" id="toc-summary-on-factors-and-dates" class="nav-link" data-scroll-target="#summary-on-factors-and-dates"><span class="header-section-number">9.7</span> Summary on Factors and Dates</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="W03.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">W#03 Data Import, Data Wrangling</h1>
<p class="subtitle lead">With material adopted from <a href="https://datasciencebox.org">Data Science in a Box</a> and <a href="https://r4ds.hadley.nz">R4DS</a></p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jan Lorenz </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="data-import-first-look" class="level1 page-columns page-full" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Data Import, First Look</h1>
<p><img src="img/data-science-explore.png" height="250"></p>
<section id="readr-and-readxl" class="level2 smaller page-columns page-full" data-number="1.1">
<h2 class="smaller anchored" data-number="1.1" data-anchor-id="readr-and-readxl"><span class="header-section-number">1.1</span> <code>readr</code> and <code>readxl</code></h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><code>readr</code> is loaded with <code>tidyverse</code></p>
<p><img src="img/readr.png" height="150"></p>
<ul>
<li><code>read_csv()</code> - comma delimited files</li>
<li><code>read_csv2()</code> - semicolon delimited files (common where “,” is used as decimal place)</li>
<li><code>read_tsv()</code> - tab delimited files</li>
<li><code>read_delim()</code> - reads in files with any delimiter</li>
<li>…</li>
</ul>
</div><div class="column" style="width:30%;">
<p><code>readxl</code> has to be installed and loaded separately</p>
<p><img src="img/readxl.png" height="150"></p>
<ul>
<li><code>read_excel()</code> read xls or xlsx files from MS Excel</li>
<li>…</li>
</ul>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>There are also packages to write data from R to excel files (<code>writexl</code>, <code>openxlsx</code>, <code>xlsx</code>, …).</p>
</div></div></section>
<section id="importing-data-from-other-sources" class="level2 smaller page-columns page-full" data-number="1.2">
<h2 class="smaller anchored" data-number="1.2" data-anchor-id="importing-data-from-other-sources"><span class="header-section-number">1.2</span> Importing data from other sources</h2>
<p><strong>R packages</strong> for some cases. They provide function to read from the source into dataframes.</p>
<ul>
<li>Data collected in a <span style="color:darkred;"><strong>Google Spreadsheet</strong></span>: <code>googlesheets4</code></li>
<li>Data in native formats of <span style="color:darkred;"><strong>SPSS</strong>, <strong>Stata</strong>, or <strong>SAS</strong></span>: <code>haven</code></li>
<li>Data in <span style="color:darkred;"><strong>SQL Databases</strong></span>: <code>DBI</code>, together with a database specific backend (<code>RMySQL</code>, <code>RSQLite</code>, <code>RPostgreSQL</code>)</li>
<li>Data in <span style="color:darkred;"><strong>JSON</strong></span> or <span style="color:darkred;"><strong>XML</strong></span> format as often used by web applications (e.g.&nbsp;written in JavaScript): <code>jsonlite</code> and <code>xml2</code></li>
<li><span style="color:darkred;"><strong>Scraping</strong></span> data directly from websites: <code>rvest</code></li>
<li>Using <a href="https://arrow.apache.org/">Appache Arrow</a>, e.g.&nbsp;<code>.parquet</code> files: <code>arrow</code></li>
</ul>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>Analog libraries will exist for python</p>
</div></div></section>
<section id="comma-separated-values-csv" class="level2 smaller" data-number="1.3">
<h2 class="smaller anchored" data-number="1.3" data-anchor-id="comma-separated-values-csv"><span class="header-section-number">1.3</span> Comma-separated values (CSV)</h2>
<p>CSV files are delimited text file</p>
<ul>
<li>Can be viewed with any text editor</li>
<li>Show each row of the dataframe in a line</li>
<li>Separates the content of columns by commas (or the delimiter character)</li>
<li>Each cell could be surrounded by quotes (when long text with commas (!) is in cells)</li>
<li>The first line is interpreted as listing the variable names by default</li>
</ul>
<p><code>readr</code> tries to guess the data type of variables</p>
<p>You can also customize it yourself!</p>
<p>We use CSV file when there is no certain reason to do otherwise. Reasons are: CSV is not provided or the dataset being very larger and hard-disk storage is an issue. Other formats or more space efficient.</p>
</section>
<section id="data-import-workflow" class="level2 smaller" data-number="1.4">
<h2 class="smaller anchored" data-number="1.4" data-anchor-id="data-import-workflow"><span class="header-section-number">1.4</span> Data import workflow</h2>
<ol type="1">
<li>You download your CSV file to the <code>data/</code> directory. You may use <code>download.file()</code> for this, but make sure you do not download large amounts of data each time you render your file!</li>
<li>Read the data with <code>data &lt;- read_csv("data/FILENAME.csv")</code> and read the report in the console.</li>
<li>Explore if you are happy and iterate by customizing the data import line using specifications until the data is as you want it to be.</li>
</ol>
<p>Good practices to document the data download:</p>
<ul>
<li>One or low number of files: Put the download line(s) in you main document, but comment out <code>#</code> after usage.</li>
<li>Write a script (<strong>data-download.r</strong>) to document the download commands.</li>
<li>Make your code check first if the file already exist, like this <code>if (!(file.exists("DATA_FILE.csv"))) {DOWNLOAD-CODE}</code></li>
</ul>
</section>
<section id="download-2.-read" class="level2 smaller" data-number="1.5">
<h2 class="smaller anchored" data-number="1.5" data-anchor-id="download-2.-read"><span class="header-section-number">1.5</span> 1. Download, 2. Read</h2>
<p>This downloads data only if the file does not exist. Then it loads it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(<span class="st">"data/hotels.csv"</span>)) {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(<span class="at">url =</span> <span class="st">"https://raw.githubusercontent.com/rstudio-education/datascience-box/main/course-materials/_slides/u2-d06-grammar-wrangle/data/hotels.csv"</span>, </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">destfile =</span> <span class="st">"data/hotels.csv"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>hotels <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/hotels.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 119390 Columns: 32
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (13): hotel, arrival_date_month, meal, country, market_segment, distrib...
dbl  (18): is_canceled, lead_time, arrival_date_year, arrival_date_week_numb...
date  (1): reservation_status_date

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>Output is a summary how <code>read_csv</code> guessed the data types of columns.</p>
</section>
<section id="explore-using-spec" class="level2 smaller" data-number="1.6">
<h2 class="smaller anchored" data-number="1.6" data-anchor-id="explore-using-spec"><span class="header-section-number">1.6</span> 3. Explore using <code>spec()</code></h2>
<p>All details to check or customize:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spec</span>(hotels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cols(
  hotel = col_character(),
  is_canceled = col_double(),
  lead_time = col_double(),
  arrival_date_year = col_double(),
  arrival_date_month = col_character(),
  arrival_date_week_number = col_double(),
  arrival_date_day_of_month = col_double(),
  stays_in_weekend_nights = col_double(),
  stays_in_week_nights = col_double(),
  adults = col_double(),
  children = col_double(),
  babies = col_double(),
  meal = col_character(),
  country = col_character(),
  market_segment = col_character(),
  distribution_channel = col_character(),
  is_repeated_guest = col_double(),
  previous_cancellations = col_double(),
  previous_bookings_not_canceled = col_double(),
  reserved_room_type = col_character(),
  assigned_room_type = col_character(),
  booking_changes = col_double(),
  deposit_type = col_character(),
  agent = col_character(),
  company = col_character(),
  days_in_waiting_list = col_double(),
  customer_type = col_character(),
  adr = col_double(),
  required_car_parking_spaces = col_double(),
  total_of_special_requests = col_double(),
  reservation_status = col_character(),
  reservation_status_date = col_date(format = "")
)</code></pre>
</div>
</div>
</section>
<section id="finalize-data-import-option-1" class="level2 smaller" data-number="1.7">
<h2 class="smaller anchored" data-number="1.7" data-anchor-id="finalize-data-import-option-1"><span class="header-section-number">1.7</span> Finalize data import, option 1</h2>
<p>When</p>
<ul>
<li>all columns are how they should</li>
<li>you consider it not necessary to document the specifications</li>
</ul>
<p>Then use <code>show_col_types = FALSE</code> to quiet the reading message.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/hotels.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="finalize-data-import-option-2" class="level2 smaller" data-number="1.8">
<h2 class="smaller anchored" data-number="1.8" data-anchor-id="finalize-data-import-option-2"><span class="header-section-number">1.8</span> Finalize data import, option 2</h2>
<ul>
<li>Copy the <code>spec(hotels)</code> output into the <code>col_types</code> argument</li>
<li>If necessary, customize it</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/hotels.csv"</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">hotel =</span> <span class="fu">col_character</span>(),</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">is_canceled =</span> <span class="fu">col_logical</span>(),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">lead_time =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">arrival_date_year =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">arrival_date_month =</span> <span class="fu">col_character</span>(),</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">arrival_date_week_number =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">arrival_date_day_of_month =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">stays_in_weekend_nights =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">stays_in_week_nights =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">adults =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">children =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">babies =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">meal =</span> <span class="fu">col_character</span>(),</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">country =</span> <span class="fu">col_character</span>(),</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">market_segment =</span> <span class="fu">col_character</span>(),</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">distribution_channel =</span> <span class="fu">col_character</span>(),</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">is_repeated_guest =</span> <span class="fu">col_logical</span>(),</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">previous_cancellations =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">previous_bookings_not_canceled =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">reserved_room_type =</span> <span class="fu">col_character</span>(),</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">assigned_room_type =</span> <span class="fu">col_character</span>(),</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">booking_changes =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">deposit_type =</span> <span class="fu">col_character</span>(),</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">agent =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">company =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">days_in_waiting_list =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">customer_type =</span> <span class="fu">col_character</span>(),</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">adr =</span> <span class="fu">col_double</span>(),</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">required_car_parking_spaces =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">total_of_special_requests =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">reservation_status =</span> <span class="fu">col_character</span>(),</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">reservation_status_date =</span> <span class="fu">col_date</span>(<span class="at">format =</span> <span class="st">""</span>)</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
</div>
</section>
<section id="columns-types" class="level2 smaller" data-number="1.9">
<h2 class="smaller anchored" data-number="1.9" data-anchor-id="columns-types"><span class="header-section-number">1.9</span> Columns types</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>type function</strong></th>
<th><strong>data type</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>col_character()</code></td>
<td>character</td>
</tr>
<tr class="even">
<td><code>col_date()</code></td>
<td>date</td>
</tr>
<tr class="odd">
<td><code>col_datetime()</code></td>
<td>POSIXct (date-time)</td>
</tr>
<tr class="even">
<td><code>col_double()</code></td>
<td>double (numeric)</td>
</tr>
<tr class="odd">
<td><code>col_factor()</code></td>
<td>factor</td>
</tr>
<tr class="even">
<td><code>col_guess()</code></td>
<td>let readr guess (default)</td>
</tr>
<tr class="odd">
<td><code>col_integer()</code></td>
<td>integer</td>
</tr>
<tr class="even">
<td><code>col_logical()</code></td>
<td>logical</td>
</tr>
<tr class="odd">
<td><code>col_number()</code></td>
<td>numbers mixed with non-number characters</td>
</tr>
<tr class="even">
<td><code>col_skip()</code></td>
<td>do not read</td>
</tr>
<tr class="odd">
<td><code>col_time()</code></td>
<td>time</td>
</tr>
</tbody>
</table>
</section>
<section id="hotels-data" class="level2" data-number="1.10">
<h2 data-number="1.10" class="anchored" data-anchor-id="hotels-data"><span class="header-section-number">1.10</span> Hotels data</h2>
<ul>
<li>Data from two hotels: one resort and one city hotel</li>
<li>Observations: Each row represents a hotel booking</li>
</ul>
</section>
<section id="first-look-on-data" class="level2" data-number="1.11">
<h2 data-number="1.11" class="anchored" data-anchor-id="first-look-on-data"><span class="header-section-number">1.11</span> First look on data</h2>
<p>Type the name of the dataframe</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>hotels</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 119,390 × 32
   hotel        is_canceled lead_time arrival_date_year arrival_date_month
   &lt;chr&gt;        &lt;lgl&gt;           &lt;int&gt;             &lt;int&gt; &lt;chr&gt;             
 1 Resort Hotel FALSE             342              2015 July              
 2 Resort Hotel FALSE             737              2015 July              
 3 Resort Hotel FALSE               7              2015 July              
 4 Resort Hotel FALSE              13              2015 July              
 5 Resort Hotel FALSE              14              2015 July              
 6 Resort Hotel FALSE              14              2015 July              
 7 Resort Hotel FALSE               0              2015 July              
 8 Resort Hotel FALSE               9              2015 July              
 9 Resort Hotel TRUE               85              2015 July              
10 Resort Hotel TRUE               75              2015 July              
# ℹ 119,380 more rows
# ℹ 27 more variables: arrival_date_week_number &lt;int&gt;,
#   arrival_date_day_of_month &lt;int&gt;, stays_in_weekend_nights &lt;int&gt;,
#   stays_in_week_nights &lt;int&gt;, adults &lt;int&gt;, children &lt;int&gt;, babies &lt;int&gt;,
#   meal &lt;chr&gt;, country &lt;chr&gt;, market_segment &lt;chr&gt;,
#   distribution_channel &lt;chr&gt;, is_repeated_guest &lt;lgl&gt;,
#   previous_cancellations &lt;int&gt;, previous_bookings_not_canceled &lt;int&gt;, …</code></pre>
</div>
</div>
</section>
<section id="look-on-variable-names" class="level2" data-number="1.12">
<h2 data-number="1.12" class="anchored" data-anchor-id="look-on-variable-names"><span class="header-section-number">1.12</span> Look on variable names</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(hotels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "hotel"                          "is_canceled"                   
 [3] "lead_time"                      "arrival_date_year"             
 [5] "arrival_date_month"             "arrival_date_week_number"      
 [7] "arrival_date_day_of_month"      "stays_in_weekend_nights"       
 [9] "stays_in_week_nights"           "adults"                        
[11] "children"                       "babies"                        
[13] "meal"                           "country"                       
[15] "market_segment"                 "distribution_channel"          
[17] "is_repeated_guest"              "previous_cancellations"        
[19] "previous_bookings_not_canceled" "reserved_room_type"            
[21] "assigned_room_type"             "booking_changes"               
[23] "deposit_type"                   "agent"                         
[25] "company"                        "days_in_waiting_list"          
[27] "customer_type"                  "adr"                           
[29] "required_car_parking_spaces"    "total_of_special_requests"     
[31] "reservation_status"             "reservation_status_date"       </code></pre>
</div>
</div>
</section>
<section id="second-look-with-glimpse" class="level2 smaller" data-number="1.13">
<h2 class="smaller anchored" data-number="1.13" data-anchor-id="second-look-with-glimpse"><span class="header-section-number">1.13</span> Second look with <code>glimpse</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(hotels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 119,390
Columns: 32
$ hotel                          &lt;chr&gt; "Resort Hotel", "Resort Hotel", "Resort…
$ is_canceled                    &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALS…
$ lead_time                      &lt;int&gt; 342, 737, 7, 13, 14, 14, 0, 9, 85, 75, …
$ arrival_date_year              &lt;int&gt; 2015, 2015, 2015, 2015, 2015, 2015, 201…
$ arrival_date_month             &lt;chr&gt; "July", "July", "July", "July", "July",…
$ arrival_date_week_number       &lt;int&gt; 27, 27, 27, 27, 27, 27, 27, 27, 27, 27,…
$ arrival_date_day_of_month      &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
$ stays_in_weekend_nights        &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ stays_in_week_nights           &lt;int&gt; 0, 0, 1, 1, 2, 2, 2, 2, 3, 3, 4, 4, 4, …
$ adults                         &lt;int&gt; 2, 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
$ children                       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ babies                         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ meal                           &lt;chr&gt; "BB", "BB", "BB", "BB", "BB", "BB", "BB…
$ country                        &lt;chr&gt; "PRT", "PRT", "GBR", "GBR", "GBR", "GBR…
$ market_segment                 &lt;chr&gt; "Direct", "Direct", "Direct", "Corporat…
$ distribution_channel           &lt;chr&gt; "Direct", "Direct", "Direct", "Corporat…
$ is_repeated_guest              &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALS…
$ previous_cancellations         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ previous_bookings_not_canceled &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ reserved_room_type             &lt;chr&gt; "C", "C", "A", "A", "A", "A", "C", "C",…
$ assigned_room_type             &lt;chr&gt; "C", "C", "C", "A", "A", "A", "C", "C",…
$ booking_changes                &lt;int&gt; 3, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ deposit_type                   &lt;chr&gt; "No Deposit", "No Deposit", "No Deposit…
$ agent                          &lt;int&gt; NA, NA, NA, 304, 240, 240, NA, 303, 240…
$ company                        &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ days_in_waiting_list           &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ customer_type                  &lt;chr&gt; "Transient", "Transient", "Transient", …
$ adr                            &lt;dbl&gt; 0.00, 0.00, 75.00, 75.00, 98.00, 98.00,…
$ required_car_parking_spaces    &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ total_of_special_requests      &lt;int&gt; 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 3, …
$ reservation_status             &lt;chr&gt; "Check-Out", "Check-Out", "Check-Out", …
$ reservation_status_date        &lt;date&gt; 2015-07-01, 2015-07-01, 2015-07-02, 20…</code></pre>
</div>
</div>
<p>Now, comes the data wrangling, transformation, …</p>
</section>
</section>
<section id="data-wrangling" class="level1 page-columns page-full" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Data Wrangling</h1>
<p>Wrangling = Import + Tidy + Transform (first iteration)</p>
<p><img src="img/data-science-explore.png" height="250"></p>
<section id="grammar-of-data-wrangling" class="level2 smaller" data-number="2.1">
<h2 class="smaller anchored" data-number="2.1" data-anchor-id="grammar-of-data-wrangling"><span class="header-section-number">2.1</span> Grammar of Data Wrangling</h2>
<div class="{.columns{}">
<div class="column" style="width:30%;">
<p><img src="img/dplyr.png" class="img-fluid"></p>
</div>
<div class="column" style="width:69%;">
<p>Grammar of data wrangling: Start with a dataset and <em>pipe</em> it through several manipulations with <code>|&gt;</code></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cyl <span class="sc">==</span> <span class="dv">8</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(manufacturer, hwy) <span class="sc">|&gt;</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer) <span class="sc">|&gt;</span> </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_hwy =</span> <span class="fu">mean</span>(hwy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Similar in <code>python</code>: Make a chain using <code>.</code> to apply <code>pandas</code> methods for dataframes one after the other.</p>
<p>Similar in <code>ggplot2</code>: Creating a ggplot object, then add graphical layers (<code>geom_</code> functions) with <code>+</code> (instead of a pipe)</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> trans)) <span class="sc">+</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="what-is-the-pipe" class="level2 smaller page-columns page-full" data-number="2.2">
<h2 class="smaller anchored" data-number="2.2" data-anchor-id="what-is-the-pipe"><span class="header-section-number">2.2</span> What is the pipe <code>|&gt;</code>?</h2>
<p><code>x |&gt; f(a,b)</code> is the same as <code>f(x,a,b)</code></p>
<p><strong>The outcome of a command is put into the first argument of the next function call.</strong> Practice it it see that it is exactly identical!</p>
<p>Reasons for using pipes:</p>
<ul>
<li>structure the sequence of your data operations from left to right</li>
<li>avoid nested function calls:<br>
nested: <code>filter(select(hotels, hotel, adults), adults == 2)</code><br>
piped: <strong><code>hotels |&gt; select(hotel, adults) |&gt; filter(adults == 2)</code></strong><br>
(base R: <code>hotels[hotels$adults == 2, c("hotel", "adults")]</code>)</li>
<li>You’ll minimize the need for local variables and function definitions</li>
<li>You’ll make it easy to add steps anywhere in the sequence of operations</li>
</ul>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>Since R 4.1.0, the pipe is part of base R. Before you had to load the <code>magrittr</code> package and use <code>%&gt;%</code>. You still find it in a lot of code out in the wild. It is almost the same.</p>
</div></div></section>
<section id="dplyr-uses-verbs-to-manipulate" class="level2 smaller" data-number="2.3">
<h2 class="smaller anchored" data-number="2.3" data-anchor-id="dplyr-uses-verbs-to-manipulate"><span class="header-section-number">2.3</span> <code>dplyr</code> uses verbs to manipulate</h2>
<ul>
<li><code>select</code>: pick columns by name</li>
<li><code>arrange</code>: reorder rows</li>
<li><code>slice</code>: pick rows using index(es)</li>
<li><code>filter</code>: pick rows matching criteria</li>
<li><code>distinct</code>: filter for unique rows</li>
<li><code>mutate</code>: add new variables</li>
<li><code>summarise</code>: reduce variables to values</li>
<li><code>group_by</code>: for grouped operations</li>
<li>… (many more)</li>
</ul>
</section>
</section>
<section id="data-subsetting" class="level1 page-columns page-full" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Data Subsetting</h1>
<section id="select-a-single-column" class="level2 smaller page-columns page-full" data-number="3.1">
<h2 class="smaller anchored" data-number="3.1" data-anchor-id="select-a-single-column"><span class="header-section-number">3.1</span> <code>select</code> a single column</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span> <span class="fu">select</span>(lead_time)     </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 119,390 × 1
   lead_time
       &lt;int&gt;
 1       342
 2       737
 3         7
 4        13
 5        14
 6        14
 7         0
 8         9
 9        85
10        75
# ℹ 119,380 more rows</code></pre>
</div>
</div>
<p>Note: <code>select(hotels, lead_time)</code> is identical.</p>
</div><div class="column fragment" style="width:40%;">
<p>Why does piping <code>|&gt;</code> work?</p>
<p>Every <code>dplyr</code> function</p>
<ul>
<li>takes a dataframe (tibble) as first argument</li>
<li>outputs a (manipulated) dataframe (tibble)</li>
</ul>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>In hotel business, lead time is the time betweeen booking and arrival.</p>
</div></div></section>
<section id="select-more-columns" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="select-more-columns"><span class="header-section-number">3.2</span> Select more columns</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span> <span class="fu">select</span>(hotel, lead_time)     </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 119,390 × 2
   hotel        lead_time
   &lt;chr&gt;            &lt;int&gt;
 1 Resort Hotel       342
 2 Resort Hotel       737
 3 Resort Hotel         7
 4 Resort Hotel        13
 5 Resort Hotel        14
 6 Resort Hotel        14
 7 Resort Hotel         0
 8 Resort Hotel         9
 9 Resort Hotel        85
10 Resort Hotel        75
# ℹ 119,380 more rows</code></pre>
</div>
</div>
<p>Note that <code>hotel</code> is a variable, but <code>hotels</code> the dataframe object name</p>
</section>
<section id="select-helper-starts_with" class="level2 smaller" data-number="3.3">
<h2 class="smaller anchored" data-number="3.3" data-anchor-id="select-helper-starts_with"><span class="header-section-number">3.3</span> Select helper <code>starts_with</code></h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"arrival"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 119,390 × 4
   arrival_date_year arrival_date_month arrival_date_week_number
               &lt;int&gt; &lt;chr&gt;                                 &lt;int&gt;
 1              2015 July                                     27
 2              2015 July                                     27
 3              2015 July                                     27
 4              2015 July                                     27
 5              2015 July                                     27
 6              2015 July                                     27
 7              2015 July                                     27
 8              2015 July                                     27
 9              2015 July                                     27
10              2015 July                                     27
# ℹ 119,380 more rows
# ℹ 1 more variable: arrival_date_day_of_month &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="bring-columns-to-the-front" class="level2 smaller" data-number="3.4">
<h2 class="smaller anchored" data-number="3.4" data-anchor-id="bring-columns-to-the-front"><span class="header-section-number">3.4</span> Bring columns to the front</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span> <span class="fu">select</span>(hotel, market_segment, children, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 119,390 × 32
   hotel        market_segment children is_canceled lead_time arrival_date_year
   &lt;chr&gt;        &lt;chr&gt;             &lt;int&gt; &lt;lgl&gt;           &lt;int&gt;             &lt;int&gt;
 1 Resort Hotel Direct                0 FALSE             342              2015
 2 Resort Hotel Direct                0 FALSE             737              2015
 3 Resort Hotel Direct                0 FALSE               7              2015
 4 Resort Hotel Corporate             0 FALSE              13              2015
 5 Resort Hotel Online TA             0 FALSE              14              2015
 6 Resort Hotel Online TA             0 FALSE              14              2015
 7 Resort Hotel Direct                0 FALSE               0              2015
 8 Resort Hotel Direct                0 FALSE               9              2015
 9 Resort Hotel Online TA             0 TRUE               85              2015
10 Resort Hotel Offline TA/TO         0 TRUE               75              2015
# ℹ 119,380 more rows
# ℹ 26 more variables: arrival_date_month &lt;chr&gt;,
#   arrival_date_week_number &lt;int&gt;, arrival_date_day_of_month &lt;int&gt;,
#   stays_in_weekend_nights &lt;int&gt;, stays_in_week_nights &lt;int&gt;, adults &lt;int&gt;,
#   babies &lt;int&gt;, meal &lt;chr&gt;, country &lt;chr&gt;, distribution_channel &lt;chr&gt;,
#   is_repeated_guest &lt;lgl&gt;, previous_cancellations &lt;int&gt;,
#   previous_bookings_not_canceled &lt;int&gt;, reserved_room_type &lt;chr&gt;, …</code></pre>
</div>
</div>
</section>
<section id="more-select-helpers" class="level2 smaller" data-number="3.5">
<h2 class="smaller anchored" data-number="3.5" data-anchor-id="more-select-helpers"><span class="header-section-number">3.5</span> More select helpers</h2>
<ul>
<li><code>starts_with()</code>: Starts with a prefix</li>
<li><code>ends_with()</code>: Ends with a suffix</li>
<li><code>contains()</code>: Contains a literal string</li>
<li><code>num_range()</code>: Matches a numerical range like x01, x02, x03</li>
<li><code>everything()</code>: Matches all variables</li>
<li><code>last_col()</code>: Select last variable, possibly with an offset</li>
<li><code>matches()</code>: Matches a regular expression (a sequence of symbols/characters expressing a string/pattern to be searched for within text)</li>
</ul>
</section>
<section id="slice-for-certain-rows" class="level2 smaller" data-number="3.6">
<h2 class="smaller anchored" data-number="3.6" data-anchor-id="slice-for-certain-rows"><span class="header-section-number">3.6</span> <code>slice</code> for certain rows</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 32
  hotel        is_canceled lead_time arrival_date_year arrival_date_month
  &lt;chr&gt;        &lt;lgl&gt;           &lt;int&gt;             &lt;int&gt; &lt;chr&gt;             
1 Resort Hotel FALSE             737              2015 July              
2 Resort Hotel FALSE               7              2015 July              
3 Resort Hotel FALSE              13              2015 July              
# ℹ 27 more variables: arrival_date_week_number &lt;int&gt;,
#   arrival_date_day_of_month &lt;int&gt;, stays_in_weekend_nights &lt;int&gt;,
#   stays_in_week_nights &lt;int&gt;, adults &lt;int&gt;, children &lt;int&gt;, babies &lt;int&gt;,
#   meal &lt;chr&gt;, country &lt;chr&gt;, market_segment &lt;chr&gt;,
#   distribution_channel &lt;chr&gt;, is_repeated_guest &lt;lgl&gt;,
#   previous_cancellations &lt;int&gt;, previous_bookings_not_canceled &lt;int&gt;,
#   reserved_room_type &lt;chr&gt;, assigned_room_type &lt;chr&gt;, …</code></pre>
</div>
</div>
</section>
<section id="filter-for-rows-with-certain-criteria" class="level2 smaller" data-number="3.7">
<h2 class="smaller anchored" data-number="3.7" data-anchor-id="filter-for-rows-with-certain-criteria"><span class="header-section-number">3.7</span> <code>filter</code> for rows with certain criteria</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span> <span class="fu">filter</span>(hotel <span class="sc">==</span> <span class="st">"City Hotel"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 79,330 × 32
   hotel      is_canceled lead_time arrival_date_year arrival_date_month
   &lt;chr&gt;      &lt;lgl&gt;           &lt;int&gt;             &lt;int&gt; &lt;chr&gt;             
 1 City Hotel FALSE               6              2015 July              
 2 City Hotel TRUE               88              2015 July              
 3 City Hotel TRUE               65              2015 July              
 4 City Hotel TRUE               92              2015 July              
 5 City Hotel TRUE              100              2015 July              
 6 City Hotel TRUE               79              2015 July              
 7 City Hotel FALSE               3              2015 July              
 8 City Hotel TRUE               63              2015 July              
 9 City Hotel TRUE               62              2015 July              
10 City Hotel TRUE               62              2015 July              
# ℹ 79,320 more rows
# ℹ 27 more variables: arrival_date_week_number &lt;int&gt;,
#   arrival_date_day_of_month &lt;int&gt;, stays_in_weekend_nights &lt;int&gt;,
#   stays_in_week_nights &lt;int&gt;, adults &lt;int&gt;, children &lt;int&gt;, babies &lt;int&gt;,
#   meal &lt;chr&gt;, country &lt;chr&gt;, market_segment &lt;chr&gt;,
#   distribution_channel &lt;chr&gt;, is_repeated_guest &lt;lgl&gt;,
#   previous_cancellations &lt;int&gt;, previous_bookings_not_canceled &lt;int&gt;, …</code></pre>
</div>
</div>
</section>
<section id="filter-for-multiple-criteria" class="level2 smaller" data-number="3.8">
<h2 class="smaller anchored" data-number="3.8" data-anchor-id="filter-for-multiple-criteria"><span class="header-section-number">3.8</span> <code>filter</code> for multiple criteria</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span> <span class="fu">filter</span>(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  babies <span class="sc">&gt;=</span> <span class="dv">1</span>,</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  children <span class="sc">&gt;=</span> <span class="dv">1</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(hotel, adults, babies, children)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 175 × 4
   hotel        adults babies children
   &lt;chr&gt;         &lt;int&gt;  &lt;int&gt;    &lt;int&gt;
 1 Resort Hotel      2      1        1
 2 Resort Hotel      2      1        1
 3 Resort Hotel      2      1        1
 4 Resort Hotel      2      1        1
 5 Resort Hotel      2      1        1
 6 Resort Hotel      2      1        1
 7 Resort Hotel      2      1        1
 8 Resort Hotel      2      1        2
 9 Resort Hotel      2      1        2
10 Resort Hotel      1      1        2
# ℹ 165 more rows</code></pre>
</div>
</div>
<p>Comma-separated conditions are interpreted as all these should be fulfilled.<br>
This is identical to the logical AND <code>&amp;</code>.<br>
<code>hotels |&gt; filter(babies &gt;= 1 &amp; children &gt;= 1)</code><br>
delivers the same. (Spot the tiny difference!)</p>
</section>
<section id="filter-for-more-complex-criteria" class="level2 smaller" data-number="3.9">
<h2 class="smaller anchored" data-number="3.9" data-anchor-id="filter-for-more-complex-criteria"><span class="header-section-number">3.9</span> <code>filter</code> for more complex criteria</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span> <span class="fu">filter</span>(</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  babies <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">|</span> children <span class="sc">&gt;=</span> <span class="dv">1</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(hotel, adults, babies, children)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9,332 × 4
   hotel        adults babies children
   &lt;chr&gt;         &lt;int&gt;  &lt;int&gt;    &lt;int&gt;
 1 Resort Hotel      2      0        1
 2 Resort Hotel      2      0        2
 3 Resort Hotel      2      0        2
 4 Resort Hotel      2      0        2
 5 Resort Hotel      2      0        1
 6 Resort Hotel      2      0        1
 7 Resort Hotel      1      0        2
 8 Resort Hotel      2      0        2
 9 Resort Hotel      2      1        0
10 Resort Hotel      2      1        0
# ℹ 9,322 more rows</code></pre>
</div>
</div>
<p><code>|</code> is the logical OR. Only one criterion needs to be fulfilled.</p>
</section>
<section id="logical-operators" class="level2 smaller scrollable" data-number="3.10">
<h2 class="smaller scrollable anchored" data-number="3.10" data-anchor-id="logical-operators"><span class="header-section-number">3.10</span> Logical operators<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></h2>
<div class="columns">
<div class="column" style="width:50%;">
<table class="caption-top table">
<thead>
<tr class="header">
<th>operator</th>
<th>definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;</code></td>
<td>less than</td>
</tr>
<tr class="even">
<td><code>&lt;=</code></td>
<td>less than or equal to</td>
</tr>
<tr class="odd">
<td><code>&gt;</code></td>
<td>greater than</td>
</tr>
<tr class="even">
<td><code>&gt;=</code></td>
<td>greater than or equal to</td>
</tr>
<tr class="odd">
<td><code>==</code></td>
<td>exactly equal to</td>
</tr>
<tr class="even">
<td><code>!=</code></td>
<td>not equal to</td>
</tr>
<tr class="odd">
<td><code>x &amp; y</code></td>
<td><code>x</code> AND <code>y</code></td>
</tr>
<tr class="even">
<td><code>x | y</code></td>
<td><code>x</code> OR <code>y</code></td>
</tr>
<tr class="odd">
<td><code>!x</code></td>
<td>not <code>x</code></td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:50%;">
<p>Test these (vectors of) logical statements</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">2</span> <span class="sc">==</span> <span class="dv">2</span>   ,   <span class="dv">2</span> <span class="sc">==</span> <span class="dv">3</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE</code></pre>
</div>
</div>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">2</span> <span class="sc">!=</span> <span class="dv">2</span>   ,    <span class="dv">2</span> <span class="sc">!=</span> <span class="dv">3</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE</code></pre>
</div>
</div>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">2</span> <span class="sc">!=</span> <span class="dv">2</span> <span class="sc">&amp;</span> <span class="dv">2</span> <span class="sc">!=</span> <span class="dv">3</span>   ,   <span class="dv">2</span> <span class="sc">!=</span> <span class="dv">2</span> <span class="sc">|</span> <span class="dv">2</span> <span class="sc">!=</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE</code></pre>
</div>
</div>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">2</span> <span class="sc">==</span> <span class="dv">2</span>   ,   <span class="sc">!</span>(<span class="dv">2</span> <span class="sc">==</span> <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE</code></pre>
</div>
</div>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">2</span> <span class="sc">!=</span> <span class="dv">2</span>   ,    <span class="sc">!</span>(<span class="dv">2</span> <span class="sc">!=</span> <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE</code></pre>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="numerical-and-logical-indexing" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Numerical and Logical Indexing</h1>
<section id="the-concept-of-indexing" class="level2 smaller" data-number="4.1">
<h2 class="smaller anchored" data-number="4.1" data-anchor-id="the-concept-of-indexing"><span class="header-section-number">4.1</span> The Concept of Indexing</h2>
<p>Select and filter can also be achieved by <strong>numerical indexing</strong>.</p>
<p><strong>In (base) R as well as in python.</strong></p>
<p>Select ranges of rows and columns</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>hotels[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">7</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  arrival_date_month arrival_date_week_number arrival_date_day_of_month
  &lt;chr&gt;                                 &lt;int&gt;                     &lt;int&gt;
1 July                                     27                         1
2 July                                     27                         1
3 July                                     27                         1</code></pre>
</div>
</div>
<p>You can use any vector (with non-overshooting indexes)</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>hotels[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">100232</span>),<span class="fu">c</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">7</span>,<span class="dv">1</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  arrival_date_month arrival_date_week_number arrival_date_day_of_month hotel   
  &lt;chr&gt;                                 &lt;int&gt;                     &lt;int&gt; &lt;chr&gt;   
1 July                                     27                         1 Resort …
2 July                                     27                         1 Resort …
3 July                                     27                         1 Resort …
4 October                                  44                        23 City Ho…</code></pre>
</div>
</div>
</section>
<section id="python-is-0-indexed-r-is-1-indexed" class="level2 smaller" data-number="4.2">
<h2 class="smaller anchored" data-number="4.2" data-anchor-id="python-is-0-indexed-r-is-1-indexed"><span class="header-section-number">4.2</span> python is 0-indexed, R is 1-indexed!</h2>
<p><strong>python:</strong> indexes go from 0 to n-1</p>
<p><strong>R:</strong> indexes go from 1 to n</p>
<p><span style="color:red;"><strong>Be aware!</strong></span></p>
<p><strong>Note:</strong> There is no correct way. For some use cases one is more <em>natural</em> for others the other.</p>
<p><strong>Analogy:</strong> In mathematics there is an unsettled debate if <span class="math inline">\(0 \in \mathbb{N}\)</span> or <span class="math inline">\(0 \notin \mathbb{N}\)</span></p>
</section>
<section id="logical-indexing" class="level2 smaller" data-number="4.3">
<h2 class="smaller anchored" data-number="4.3" data-anchor-id="logical-indexing"><span class="header-section-number">4.3</span> Logical Indexing</h2>
<p>Instead of numerical indexing (with a vector of numbers) you can also use <strong>logical indexing</strong> with a vector of logicals.</p>
<p>With logical vectors you can select rows and columns.</p>
<p>We create a small sample data frame</p>
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="at">y =</span> letters[<span class="dv">6</span><span class="sc">:</span><span class="dv">10</span>])</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  x     y    
  &lt;chr&gt; &lt;chr&gt;
1 A     f    
2 B     g    
3 C     h    
4 D     i    
5 E     j    </code></pre>
</div>
</div>
<p>. . .</p>
<p>Now, we select some rows and a column with logical index vectors</p>
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>data[<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>),<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
  x    
  &lt;chr&gt;
1 A    
2 C    
3 E    </code></pre>
</div>
</div>
</section>
<section id="logical-vectors-from-conditional-statements" class="level2 smaller" data-number="4.4">
<h2 class="smaller anchored" data-number="4.4" data-anchor-id="logical-vectors-from-conditional-statements"><span class="header-section-number">4.4</span> Logical vectors from conditional statements</h2>
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "A" "B" "C" "D" "E"</code></pre>
</div>
</div>
<p>. . .</p>
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"C"</span>,<span class="st">"E"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
<p>. . .</p>
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>data[data<span class="sc">$</span>x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"C"</span>,<span class="st">"E"</span>),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  x     y    
  &lt;chr&gt; &lt;chr&gt;
1 C     h    
2 E     j    </code></pre>
</div>
</div>
<p>. . .</p>
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>data[data<span class="sc">$</span>x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"C"</span>,<span class="st">"E"</span>) <span class="sc">|</span> </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>       data<span class="sc">$</span>y <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"h"</span>,<span class="st">"i"</span>),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  x     y    
  &lt;chr&gt; &lt;chr&gt;
1 C     h    
2 D     i    
3 E     j    </code></pre>
</div>
</div>
<p>. . .</p>
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">|&gt;</span> </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"C"</span>,<span class="st">"E"</span>) <span class="sc">|</span> y <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"h"</span>,<span class="st">"i"</span>)</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  x     y    
  &lt;chr&gt; &lt;chr&gt;
1 C     h    
2 D     i    
3 E     j    </code></pre>
</div>
</div>
</section>
</section>
<section id="counting-and-sorting" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Counting and Sorting</h1>
<section id="unique-combinations-arranging" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="unique-combinations-arranging"><span class="header-section-number">5.1</span> Unique combinations, arranging</h2>
<p><code>distinct</code> and <code>arrange</code> (for sorting)</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span> </span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(hotel, market_segment) <span class="sc">|&gt;</span> </span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(hotel, market_segment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 × 2
   hotel        market_segment
   &lt;chr&gt;        &lt;chr&gt;         
 1 City Hotel   Aviation      
 2 City Hotel   Complementary 
 3 City Hotel   Corporate     
 4 City Hotel   Direct        
 5 City Hotel   Groups        
 6 City Hotel   Offline TA/TO 
 7 City Hotel   Online TA     
 8 City Hotel   Undefined     
 9 Resort Hotel Complementary 
10 Resort Hotel Corporate     
11 Resort Hotel Direct        
12 Resort Hotel Groups        
13 Resort Hotel Offline TA/TO 
14 Resort Hotel Online TA     </code></pre>
</div>
</div>
<p>. . .</p>
</section>
<section id="counting" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="counting"><span class="header-section-number">5.2</span> Counting</h2>
<p><code>count</code></p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span> </span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(hotel, market_segment) <span class="sc">|&gt;</span>      <span class="co"># This produces a new variable n</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 × 3
   hotel        market_segment     n
   &lt;chr&gt;        &lt;chr&gt;          &lt;int&gt;
 1 City Hotel   Undefined          2
 2 Resort Hotel Complementary    201
 3 City Hotel   Aviation         237
 4 City Hotel   Complementary    542
 5 Resort Hotel Corporate       2309
 6 City Hotel   Corporate       2986
 7 Resort Hotel Groups          5836
 8 City Hotel   Direct          6093
 9 Resort Hotel Direct          6513
10 Resort Hotel Offline TA/TO   7472
11 City Hotel   Groups         13975
12 City Hotel   Offline TA/TO  16747
13 Resort Hotel Online TA      17729
14 City Hotel   Online TA      38748</code></pre>
</div>
</div>
</section>
<section id="counting-arrange-descending" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="counting-arrange-descending"><span class="header-section-number">5.3</span> Counting, arrange descending</h2>
<p><code>count</code>, <code>arrange</code>, <code>desc</code></p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span> </span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(hotel, market_segment) <span class="sc">|&gt;</span>      <span class="co"># This produces a new variable n</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 × 3
   hotel        market_segment     n
   &lt;chr&gt;        &lt;chr&gt;          &lt;int&gt;
 1 City Hotel   Online TA      38748
 2 Resort Hotel Online TA      17729
 3 City Hotel   Offline TA/TO  16747
 4 City Hotel   Groups         13975
 5 Resort Hotel Offline TA/TO   7472
 6 Resort Hotel Direct          6513
 7 City Hotel   Direct          6093
 8 Resort Hotel Groups          5836
 9 City Hotel   Corporate       2986
10 Resort Hotel Corporate       2309
11 City Hotel   Complementary    542
12 City Hotel   Aviation         237
13 Resort Hotel Complementary    201
14 City Hotel   Undefined          2</code></pre>
</div>
</div>
</section>
</section>
<section id="data-transformation" class="level1 page-columns page-full" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Data Transformation</h1>
<section id="create-a-new-variable-with-mutate" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="create-a-new-variable-with-mutate"><span class="header-section-number">6.1</span> Create a new variable with <code>mutate</code></h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">little_ones =</span> children <span class="sc">+</span> babies) <span class="sc">|&gt;</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(children, babies, little_ones) <span class="sc">|&gt;</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(little_ones)) <span class="co"># This sorts in descending order. See the big things!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 119,390 × 3
   children babies little_ones
      &lt;int&gt;  &lt;int&gt;       &lt;int&gt;
 1       10      0          10
 2        0     10          10
 3        0      9           9
 4        2      1           3
 5        2      1           3
 6        2      1           3
 7        3      0           3
 8        2      1           3
 9        2      1           3
10        3      0           3
# ℹ 119,380 more rows</code></pre>
</div>
</div>
</section>
<section id="more-mutating" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="more-mutating"><span class="header-section-number">6.2</span> More mutating</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">little_ones =</span> children <span class="sc">+</span> babies) <span class="sc">|&gt;</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(hotel, little_ones) <span class="sc">|&gt;</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   hotel        little_ones     n       prop
   &lt;chr&gt;              &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;
 1 City Hotel             0 73923 0.619     
 2 City Hotel             1  3263 0.0273    
 3 City Hotel             2  2056 0.0172    
 4 City Hotel             3    82 0.000687  
 5 City Hotel             9     1 0.00000838
 6 City Hotel            10     1 0.00000838
 7 City Hotel            NA     4 0.0000335 
 8 Resort Hotel           0 36131 0.303     
 9 Resort Hotel           1  2183 0.0183    
10 Resort Hotel           2  1716 0.0144    
11 Resort Hotel           3    29 0.000243  
12 Resort Hotel          10     1 0.00000838</code></pre>
</div>
</div>
</section>
<section id="summarizing" class="level2 page-columns page-full" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="summarizing"><span class="header-section-number">6.3</span> Summarizing</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_adr =</span> <span class="fu">mean</span>(adr))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  mean_adr
     &lt;dbl&gt;
1     102.</code></pre>
</div>
</div>
<ul>
<li>That shrinks the dataframe to one row!</li>
<li>Don’t forget to name the new variable (here <code>mean_adr</code>)</li>
<li>You can use any function you can apply to a vector!<br>
(Sometimes you may need to write your own one.)</li>
</ul>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p>In hoteling, ADR is the average daily rate, the average daily rental income per paid occupied room. A performce indicator.</p>
</div></div></section>
<section id="grouped-operations" class="level2 smaller" data-number="6.4">
<h2 class="smaller anchored" data-number="6.4" data-anchor-id="grouped-operations"><span class="header-section-number">6.4</span> Grouped operations</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hotel) <span class="sc">|&gt;</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_adr =</span> <span class="fu">mean</span>(adr))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  hotel        mean_adr
  &lt;chr&gt;           &lt;dbl&gt;
1 City Hotel      105. 
2 Resort Hotel     95.0</code></pre>
</div>
</div>
<p>Look at the grouping attributes:</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hotel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 119,390 × 32
# Groups:   hotel [2]
   hotel        is_canceled lead_time arrival_date_year arrival_date_month
   &lt;chr&gt;        &lt;lgl&gt;           &lt;int&gt;             &lt;int&gt; &lt;chr&gt;             
 1 Resort Hotel FALSE             342              2015 July              
 2 Resort Hotel FALSE             737              2015 July              
 3 Resort Hotel FALSE               7              2015 July              
 4 Resort Hotel FALSE              13              2015 July              
 5 Resort Hotel FALSE              14              2015 July              
 6 Resort Hotel FALSE              14              2015 July              
 7 Resort Hotel FALSE               0              2015 July              
 8 Resort Hotel FALSE               9              2015 July              
 9 Resort Hotel TRUE               85              2015 July              
10 Resort Hotel TRUE               75              2015 July              
# ℹ 119,380 more rows
# ℹ 27 more variables: arrival_date_week_number &lt;int&gt;,
#   arrival_date_day_of_month &lt;int&gt;, stays_in_weekend_nights &lt;int&gt;,
#   stays_in_week_nights &lt;int&gt;, adults &lt;int&gt;, children &lt;int&gt;, babies &lt;int&gt;,
#   meal &lt;chr&gt;, country &lt;chr&gt;, market_segment &lt;chr&gt;,
#   distribution_channel &lt;chr&gt;, is_repeated_guest &lt;lgl&gt;,
#   previous_cancellations &lt;int&gt;, previous_bookings_not_canceled &lt;int&gt;, …</code></pre>
</div>
</div>
</section>
<section id="grouping-summarizing-visualizing" class="level2 smaller" data-number="6.5">
<h2 class="smaller anchored" data-number="6.5" data-anchor-id="grouping-summarizing-visualizing"><span class="header-section-number">6.5</span> Grouping, summarizing, visualizing</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hotel, arrival_date_week_number) <span class="sc">|&gt;</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_adr =</span> <span class="fu">mean</span>(adr)) <span class="sc">|&gt;</span> </span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> arrival_date_week_number, <span class="at">y =</span> mean_adr, <span class="at">color =</span> hotel)) <span class="sc">+</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'hotel'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="W03_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="grouping-alternative" class="level2 smaller" data-number="6.6">
<h2 class="smaller anchored" data-number="6.6" data-anchor-id="grouping-alternative"><span class="header-section-number">6.6</span> Grouping alternative</h2>
<p>Instead of a <code>group_by(...)</code> you can also use the <code>.by = ...</code> argument in <code>summarize</code> (or <code>mutate</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>hotels <span class="sc">|&gt;</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_adr =</span> <span class="fu">mean</span>(adr), <span class="at">.by =</span> <span class="fu">c</span>(hotel, arrival_date_week_number)) <span class="sc">|&gt;</span> </span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> arrival_date_week_number, <span class="at">y =</span> mean_adr, <span class="at">color =</span> hotel)) <span class="sc">+</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="W03_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="where-to-find-help" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Where to find help</h1>
<section id="resources" class="level2 smaller" data-number="7.1">
<h2 class="smaller anchored" data-number="7.1" data-anchor-id="resources"><span class="header-section-number">7.1</span> Resources</h2>
<ul>
<li>For systemic understanding: Learning resources linked in the syllabus
<ul>
<li>R for Data Science</li>
<li>Python Data Science Handbook</li>
</ul></li>
<li>For quick overview to get inspiration
<ul>
<li>Cheatsheets (find some in RStudio -&gt; Help, others by google)
<ul>
<li>ggplot2 Cheatsheet</li>
<li>dplyr Cheatsheet</li>
</ul></li>
</ul></li>
<li>For detailed help with a function
<ul>
<li>Help file of the function <code>?FUNCTION-NAME</code>, or search box in Help tab</li>
<li>Reference page on the package webpage</li>
</ul></li>
<li>Talk to ChatGPT? <em>Does it work?</em></li>
</ul>
</section>
</section>
<section id="more-under-the-hood-names-vectors-indexing" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> More under the hood: Names vectors, Indexing</h1>
<section id="named-vectors" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="named-vectors"><span class="header-section-number">8.1</span> Named vectors</h2>
<p>All types of vectors can be named upon creation</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="at">Num1 =</span> <span class="dv">4</span>, <span class="at">Second =</span> <span class="dv">7</span>, <span class="at">Last =</span> <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Num1 Second   Last 
     4      7      8 </code></pre>
</div>
</div>
<p>. . .</p>
<p>or names can be set afterward.</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">set_names</span>(x, <span class="fu">c</span>(<span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"c"</span>,<span class="st">"d"</span>))</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>a b c d 
1 2 3 4 </code></pre>
</div>
</div>
<p>. . .</p>
<p>Named vectors can be used for subsetting.</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>y[<span class="fu">c</span>(<span class="st">"b"</span>,<span class="st">"d"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>b d 
2 4 </code></pre>
</div>
</div>
</section>
<section id="reminder-indexing-and-vectorized-thinking" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="reminder-indexing-and-vectorized-thinking"><span class="header-section-number">8.2</span> Reminder: Indexing and vectorized thinking</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">set_names</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> A  B  C  D  E  F  G  H  I  J 
 1  2  3  4  5  6  7  8  9 10 </code></pre>
</div>
</div>
<p>. . .</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">5</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>D B A A A A D A E 
4 2 1 1 1 1 4 1 5 </code></pre>
</div>
</div>
<p>. . .</p>
<p>Removing with negative index numbers.</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>,<span class="sc">-</span><span class="dv">5</span>,<span class="sc">-</span><span class="dv">2</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> A  D  F  G  H  I  J 
 1  4  6  7  8  9 10 </code></pre>
</div>
</div>
<p>. . .</p>
<p>Mixing does not work.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>,<span class="dv">1</span>)]  <span class="co"># Will throw an error</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="r-objects-can-have-attributes" class="level2 smaller" data-number="8.3">
<h2 class="smaller anchored" data-number="8.3" data-anchor-id="r-objects-can-have-attributes"><span class="header-section-number">8.3</span> R objects can have attributes</h2>
<p>In a named vector, the names are an attribute.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> A  B  C  D  E  F  G  H  I  J 
 1  2  3  4  5  6  7  8  9 10 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$names
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J"</code></pre>
</div>
</div>
<p>. . .</p>
<p>Attributes can be assigned freely.</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(x, <span class="st">"SayHi"</span>) <span class="ot">&lt;-</span> <span class="st">"Hi"</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(x, <span class="st">"SayBye"</span>) <span class="ot">&lt;-</span> <span class="st">"Bye"</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$names
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J"

$SayHi
[1] "Hi"

$SayBye
[1] "Bye"</code></pre>
</div>
</div>
</section>
<section id="attributes-in-data-structures" class="level2 scrollable" data-number="8.4">
<h2 class="scrollable anchored" data-number="8.4" data-anchor-id="attributes-in-data-structures"><span class="header-section-number">8.4</span> Attributes in data structures</h2>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(airports)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$class
[1] "tbl_df"     "tbl"        "data.frame"

$row.names
   [1]    1    2    3    4    5    6    7    8    9   10   11   12   13   14
  [15]   15   16   17   18   19   20   21   22   23   24   25   26   27   28
  [29]   29   30   31   32   33   34   35   36   37   38   39   40   41   42
  [43]   43   44   45   46   47   48   49   50   51   52   53   54   55   56
  [57]   57   58   59   60   61   62   63   64   65   66   67   68   69   70
  [71]   71   72   73   74   75   76   77   78   79   80   81   82   83   84
  [85]   85   86   87   88   89   90   91   92   93   94   95   96   97   98
  [99]   99  100  101  102  103  104  105  106  107  108  109  110  111  112
 [113]  113  114  115  116  117  118  119  120  121  122  123  124  125  126
 [127]  127  128  129  130  131  132  133  134  135  136  137  138  139  140
 [141]  141  142  143  144  145  146  147  148  149  150  151  152  153  154
 [155]  155  156  157  158  159  160  161  162  163  164  165  166  167  168
 [169]  169  170  171  172  173  174  175  176  177  178  179  180  181  182
 [183]  183  184  185  186  187  188  189  190  191  192  193  194  195  196
 [197]  197  198  199  200  201  202  203  204  205  206  207  208  209  210
 [211]  211  212  213  214  215  216  217  218  219  220  221  222  223  224
 [225]  225  226  227  228  229  230  231  232  233  234  235  236  237  238
 [239]  239  240  241  242  243  244  245  246  247  248  249  250  251  252
 [253]  253  254  255  256  257  258  259  260  261  262  263  264  265  266
 [267]  267  268  269  270  271  272  273  274  275  276  277  278  279  280
 [281]  281  282  283  284  285  286  287  288  289  290  291  292  293  294
 [295]  295  296  297  298  299  300  301  302  303  304  305  306  307  308
 [309]  309  310  311  312  313  314  315  316  317  318  319  320  321  322
 [323]  323  324  325  326  327  328  329  330  331  332  333  334  335  336
 [337]  337  338  339  340  341  342  343  344  345  346  347  348  349  350
 [351]  351  352  353  354  355  356  357  358  359  360  361  362  363  364
 [365]  365  366  367  368  369  370  371  372  373  374  375  376  377  378
 [379]  379  380  381  382  383  384  385  386  387  388  389  390  391  392
 [393]  393  394  395  396  397  398  399  400  401  402  403  404  405  406
 [407]  407  408  409  410  411  412  413  414  415  416  417  418  419  420
 [421]  421  422  423  424  425  426  427  428  429  430  431  432  433  434
 [435]  435  436  437  438  439  440  441  442  443  444  445  446  447  448
 [449]  449  450  451  452  453  454  455  456  457  458  459  460  461  462
 [463]  463  464  465  466  467  468  469  470  471  472  473  474  475  476
 [477]  477  478  479  480  481  482  483  484  485  486  487  488  489  490
 [491]  491  492  493  494  495  496  497  498  499  500  501  502  503  504
 [505]  505  506  507  508  509  510  511  512  513  514  515  516  517  518
 [519]  519  520  521  522  523  524  525  526  527  528  529  530  531  532
 [533]  533  534  535  536  537  538  539  540  541  542  543  544  545  546
 [547]  547  548  549  550  551  552  553  554  555  556  557  558  559  560
 [561]  561  562  563  564  565  566  567  568  569  570  571  572  573  574
 [575]  575  576  577  578  579  580  581  582  583  584  585  586  587  588
 [589]  589  590  591  592  593  594  595  596  597  598  599  600  601  602
 [603]  603  604  605  606  607  608  609  610  611  612  613  614  615  616
 [617]  617  618  619  620  621  622  623  624  625  626  627  628  629  630
 [631]  631  632  633  634  635  636  637  638  639  640  641  642  643  644
 [645]  645  646  647  648  649  650  651  652  653  654  655  656  657  658
 [659]  659  660  661  662  663  664  665  666  667  668  669  670  671  672
 [673]  673  674  675  676  677  678  679  680  681  682  683  684  685  686
 [687]  687  688  689  690  691  692  693  694  695  696  697  698  699  700
 [701]  701  702  703  704  705  706  707  708  709  710  711  712  713  714
 [715]  715  716  717  718  719  720  721  722  723  724  725  726  727  728
 [729]  729  730  731  732  733  734  735  736  737  738  739  740  741  742
 [743]  743  744  745  746  747  748  749  750  751  752  753  754  755  756
 [757]  757  758  759  760  761  762  763  764  765  766  767  768  769  770
 [771]  771  772  773  774  775  776  777  778  779  780  781  782  783  784
 [785]  785  786  787  788  789  790  791  792  793  794  795  796  797  798
 [799]  799  800  801  802  803  804  805  806  807  808  809  810  811  812
 [813]  813  814  815  816  817  818  819  820  821  822  823  824  825  826
 [827]  827  828  829  830  831  832  833  834  835  836  837  838  839  840
 [841]  841  842  843  844  845  846  847  848  849  850  851  852  853  854
 [855]  855  856  857  858  859  860  861  862  863  864  865  866  867  868
 [869]  869  870  871  872  873  874  875  876  877  878  879  880  881  882
 [883]  883  884  885  886  887  888  889  890  891  892  893  894  895  896
 [897]  897  898  899  900  901  902  903  904  905  906  907  908  909  910
 [911]  911  912  913  914  915  916  917  918  919  920  921  922  923  924
 [925]  925  926  927  928  929  930  931  932  933  934  935  936  937  938
 [939]  939  940  941  942  943  944  945  946  947  948  949  950  951  952
 [953]  953  954  955  956  957  958  959  960  961  962  963  964  965  966
 [967]  967  968  969  970  971  972  973  974  975  976  977  978  979  980
 [981]  981  982  983  984  985  986  987  988  989  990  991  992  993  994
 [995]  995  996  997  998  999 1000 1001 1002 1003 1004 1005 1006 1007 1008
[1009] 1009 1010 1011 1012 1013 1014 1015 1016 1017 1018 1019 1020 1021 1022
[1023] 1023 1024 1025 1026 1027 1028 1029 1030 1031 1032 1033 1034 1035 1036
[1037] 1037 1038 1039 1040 1041 1042 1043 1044 1045 1046 1047 1048 1049 1050
[1051] 1051 1052 1053 1054 1055 1056 1057 1058 1059 1060 1061 1062 1063 1064
[1065] 1065 1066 1067 1068 1069 1070 1071 1072 1073 1074 1075 1076 1077 1078
[1079] 1079 1080 1081 1082 1083 1084 1085 1086 1087 1088 1089 1090 1091 1092
[1093] 1093 1094 1095 1096 1097 1098 1099 1100 1101 1102 1103 1104 1105 1106
[1107] 1107 1108 1109 1110 1111 1112 1113 1114 1115 1116 1117 1118 1119 1120
[1121] 1121 1122 1123 1124 1125 1126 1127 1128 1129 1130 1131 1132 1133 1134
[1135] 1135 1136 1137 1138 1139 1140 1141 1142 1143 1144 1145 1146 1147 1148
[1149] 1149 1150 1151 1152 1153 1154 1155 1156 1157 1158 1159 1160 1161 1162
[1163] 1163 1164 1165 1166 1167 1168 1169 1170 1171 1172 1173 1174 1175 1176
[1177] 1177 1178 1179 1180 1181 1182 1183 1184 1185 1186 1187 1188 1189 1190
[1191] 1191 1192 1193 1194 1195 1196 1197 1198 1199 1200 1201 1202 1203 1204
[1205] 1205 1206 1207 1208 1209 1210 1211 1212 1213 1214 1215 1216 1217 1218
[1219] 1219 1220 1221 1222 1223 1224 1225 1226 1227 1228 1229 1230 1231 1232
[1233] 1233 1234 1235 1236 1237 1238 1239 1240 1241 1242 1243 1244 1245 1246
[1247] 1247 1248 1249 1250 1251 1252 1253 1254 1255 1256 1257 1258 1259 1260
[1261] 1261 1262 1263 1264 1265 1266 1267 1268 1269 1270 1271 1272 1273 1274
[1275] 1275 1276 1277 1278 1279 1280 1281 1282 1283 1284 1285 1286 1287 1288
[1289] 1289 1290 1291 1292 1293 1294 1295 1296 1297 1298 1299 1300 1301 1302
[1303] 1303 1304 1305 1306 1307 1308 1309 1310 1311 1312 1313 1314 1315 1316
[1317] 1317 1318 1319 1320 1321 1322 1323 1324 1325 1326 1327 1328 1329 1330
[1331] 1331 1332 1333 1334 1335 1336 1337 1338 1339 1340 1341 1342 1343 1344
[1345] 1345 1346 1347 1348 1349 1350 1351 1352 1353 1354 1355 1356 1357 1358
[1359] 1359 1360 1361 1362 1363 1364 1365 1366 1367 1368 1369 1370 1371 1372
[1373] 1373 1374 1375 1376 1377 1378 1379 1380 1381 1382 1383 1384 1385 1386
[1387] 1387 1388 1389 1390 1391 1392 1393 1394 1395 1396 1397 1398 1399 1400
[1401] 1401 1402 1403 1404 1405 1406 1407 1408 1409 1410 1411 1412 1413 1414
[1415] 1415 1416 1417 1418 1419 1420 1421 1422 1423 1424 1425 1426 1427 1428
[1429] 1429 1430 1431 1432 1433 1434 1435 1436 1437 1438 1439 1440 1441 1442
[1443] 1443 1444 1445 1446 1447 1448 1449 1450 1451 1452 1453 1454 1455 1456
[1457] 1457 1458

$spec
cols(
  id = col_double(),
  name = col_character(),
  city = col_character(),
  country = col_character(),
  faa = col_character(),
  icao = col_character(),
  lat = col_double(),
  lon = col_double(),
  alt = col_double(),
  tz = col_double(),
  dst = col_character(),
  tzone = col_character()
)

$names
[1] "faa"   "name"  "lat"   "lon"   "alt"   "tz"    "dst"   "tzone"</code></pre>
</div>
</div>
</section>
<section id="three-important-attributes" class="level2 smaller" data-number="8.5">
<h2 class="smaller anchored" data-number="8.5" data-anchor-id="three-important-attributes"><span class="header-section-number">8.5</span> Three important attributes</h2>
<ul>
<li><strong>Names</strong> are used to name element of a vector, also works for lists and therefore also dataframes (lists of atomic vectors of the same length)</li>
<li><strong>Dimensions</strong> (<code>dim()</code>) is a short numeric vector making a vector behave as a matrix or a higher dimensional array. A vector <code>1:6</code> together with <code>dim</code> being <code>c(2,3)</code> is a matrix with 2 rows and 3 columns<br>
<span class="math inline">\(\begin{bmatrix} 1 &amp; 3 &amp; 5 \\ 2 &amp; 4 &amp; 6 \end{bmatrix}\)</span></li>
<li><strong>Class</strong> is used to implement the S3 object oriented system. We don’t need to know the details here. The class system makes it for example possible that the same function, e.g.&nbsp;<code>print()</code> behaves differently for objects of a different class.</li>
</ul>
<p><strong>Class</strong> plays a role in specifying <em>augmented vectors</em> like factors, dates, date-times, or tibbles.</p>
</section>
</section>
<section id="augmented-vectors-factors-and-dates" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Augmented vectors: Factors and Dates</h1>
<section id="factors" class="level2 smaller" data-number="9.1">
<h2 class="smaller anchored" data-number="9.1" data-anchor-id="factors"><span class="header-section-number">9.1</span> Factors</h2>
<p>R uses factors to handle categorical variables, variables that have a fixed and known set of possible values</p>
<div class="cell" data-output-location="fragment">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">"BS"</span>, <span class="st">"MS"</span>, <span class="st">"PhD"</span>, <span class="st">"MS"</span>, <span class="st">"BS"</span>, <span class="st">"BS"</span>))</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] BS  MS  PhD MS  BS  BS 
Levels: BS MS PhD</code></pre>
</div>
</div>
<p>. . .</p>
<p>Technically, a factor is vector of integers with a <code>levels</code> attribute which specifies the categories for the integers.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.integer</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 2 1 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$levels
[1] "BS"  "MS"  "PhD"

$class
[1] "factor"</code></pre>
</div>
</div>
<p>. . .</p>
<p>The class factor makes R print the level of each element of the vector instead of the underlying integer.</p>
</section>
<section id="factors-for-data-visualization" class="level2 smaller" data-number="9.2">
<h2 class="smaller anchored" data-number="9.2" data-anchor-id="factors-for-data-visualization"><span class="header-section-number">9.2</span> Factors for data visualization</h2>
<p>We manipulate factors with functions from the <a href="https://forcats.tidyverse.org/"><code>forcats</code></a> package of the tidyverse core.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Reverse</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Order by frequency</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Regroup</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> manufacturer)) <span class="sc">+</span> <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="W03_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">fct_rev</span>(manufacturer))) <span class="sc">+</span> <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="W03_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">fct_rev</span>(<span class="fu">fct_infreq</span>(manufacturer)))) <span class="sc">+</span> <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="W03_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">fct_other</span>(manufacturer, <span class="at">keep =</span> <span class="fu">c</span>(<span class="st">"dodge"</span>, <span class="st">"toyota"</span>, <span class="st">"volkswagen"</span>)))) <span class="sc">+</span> <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="W03_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="dates" class="level2 smaller" data-number="9.3">
<h2 class="smaller anchored" data-number="9.3" data-anchor-id="dates"><span class="header-section-number">9.3</span> Dates</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>ISO 8601 standard for dates: <strong>YYYY-MM-DD</strong>. Today: 2025-08-31.</li>
<li>Dates in R are numeric vectors that represent the number of days since 1 January 1970.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-01-01"</span>); y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2020-01-01"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$class
[1] "Date"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.double</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18262</code></pre>
</div>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.double</span>(<span class="fu">as.Date</span>(<span class="st">"1970-01-01"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.double</span>(<span class="fu">as.Date</span>(<span class="st">"1969-01-01"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -365</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<p><img src="https://social-coop-media.ams3.cdn.digitaloceanspaces.com/media_attachments/files/110/509/555/396/284/468/original/760b0480d20ee7d9.jpeg" class="img-fluid"></p>
<p><a href="https://social.coop/@mattl/110509557203534941" class="uri">https://social.coop/@mattl/110509557203534941</a></p>
</div>
</div>
</section>
<section id="how-many-days-are-you-old" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="how-many-days-are-you-old"><span class="header-section-number">9.4</span> How many days are you old?</h2>
<p>. . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.Date</span>() <span class="sc">-</span> <span class="fu">as.Date</span>(<span class="st">"1976-01-16"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time difference of 18125 days</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sys.Date() gives as the current day your computer is set to</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="date-times" class="level2 smaller" data-number="9.5">
<h2 class="smaller anchored" data-number="9.5" data-anchor-id="date-times"><span class="header-section-number">9.5</span> Date-times</h2>
<p>For date-time manipulation use <a href="https://lubridate.tidyverse.org/"><code>lubridate</code></a> form the tidyverse.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">ymd_hm</span>(<span class="st">"1970-01-01 01:00"</span>)</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: Instead of loading package `pack` to use its function `func` you can also write `pack::func`</span></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="co"># This works when the package is installed even when not loaded.</span></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1970-01-01 01:00:00 UTC"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$class
[1] "POSIXct" "POSIXt" 

$tzone
[1] "UTC"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.double</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3600</code></pre>
</div>
</div>
<p>UTC: Coordinated Universal Time. We are in the UTC+1 timezone.<br>
POSIXct: Portable Operating System Interface, calendar time. Stores date and time in seconds with the number of seconds beginning at 1 January 1970.</p>
</section>
<section id="how-many-seconds-are-you-old" class="level2" data-number="9.6">
<h2 data-number="9.6" class="anchored" data-anchor-id="how-many-seconds-are-you-old"><span class="header-section-number">9.6</span> How many seconds are you old?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.double</span>(lubridate<span class="sc">::</span><span class="fu">now</span>()) <span class="sc">-</span> </span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">as.double</span>(lubridate<span class="sc">::</span><span class="fu">ymd_hm</span>(<span class="st">"1976-01-16_12:04"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1566031859</code></pre>
</div>
</div>
</section>
<section id="summary-on-factors-and-dates" class="level2 smaller" data-number="9.7">
<h2 class="smaller anchored" data-number="9.7" data-anchor-id="summary-on-factors-and-dates"><span class="header-section-number">9.7</span> Summary on Factors and Dates</h2>
<ul>
<li>Factors
<ul>
<li>Can be used to create categorical variables specified by the <code>levels</code>-attribute</li>
<li>Often used to specify the order of categories. Particularly useful for graphics!</li>
<li>Can be manipulated with functions from the <code>forcats</code> package</li>
<li>Often it is sufficient to work with character vectors.</li>
</ul></li>
<li>Dates and times
<ul>
<li>Do not shy away from learning to work with dates and times properly!</li>
<li>Tedious to get right when the date format from the data is messy, but it is worth it!</li>
<li>Use the <code>lubridate</code> package. Usually you just need one command to convert a character vector to a date or date-time vector, but you have to customize correctly.</li>
</ul></li>
</ul>
<p>Read the chapter of factors and dates in <a href="https://r4ds.hadley.nz">R for Data Science</a></p>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Logical is sometimes called <strong>Boolean</strong><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>